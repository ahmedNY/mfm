<!--
  This template loads for the 'tab.friend-detail' state (app.js)
  'friend' is a $scope variable created in the FriendsCtrl controller (controllers.js)
  The FriendsCtrl pulls data from the Friends service (service.js)
  The Friends service returns an array of friend data
-->

<ion-view view-title="New Contract : {{model.realstate.name}}">
  <ion-content class="padding">
  <wizard on-finish="finishedWizard()"> 


  <wz-step>
    <!-- Contract date -->
    <div class="card">
      <!-- Date of contract -->
      <label class="item item-input">
        <span class="input-label">Contract Date</span>
        <input type="date" ng-model="model.contractDate">
      </label>
    </div>

    <!-- Renter -->
    <div class="list card">
      <div class="item" ng-show="model.renter">
        <h2>Renter: <b>{{model.renter.name}} / {{model.renter.phone1}}</b></h2>
      </div>
      <a class="item item-icon-left positive" ng-click="openModalPeople('renter')">
        <i class="icon ion-ios-person"></i>
        Select renter
      </a>
    </div>

    <!-- Companion -->
    <div class="list card">
      <div class="item item-divider" ng-show="model.companions.length === model.companionLimit">
        Companions
      </div>
      <div class="item item-icon-right" ng-repeat="companion in model.companions"> 
          <i class="icon ion-minus-circled assertive" ng-click="removeCompanion(companion)"></i>
          {{companion.name}} / {{companion.phone}} 
      </div>
     <a class="item item-icon-left positive" ng-click="openModalCompanion()" 
        ng-show="model.companions.length < model.companionLimit">
        <i class="icon ion-ios-people"></i>
        Add companion
      </a>
    </div>

    <!-- Broker -->
    <div class="list card">
      <div class="item" ng-show="model.broker">
        <h2>Broker: <b>{{model.broker.name}} / {{model.broker.phone1}}</b></h2>
      </div>
      <a class="item item-icon-left calm" ng-click="openModalPeople('broker')">
        <i class="icon ion-ios-person"></i>
        Select broker
      </a>
    </div>

    <!-- Dates -->
    <div class="list card">
    <!-- Start Date -->
    <label class="item item-input">
      <span class="input-label">Start date</span>
      <input type="date" ng-model="model.startDate">
    </label>
    <!-- End Date -->
    <label class="item item-input">
      <span class="input-label">End date</span>
      <input type="date" ng-change="endDateChanged()" ng-model="model.endDate">
    </label>
    <!-- Duration of lease on dayse -->
    <label class="item item-input">
      <span class="input-label">No. of days</span>
      <input type="number" ng-model="model.durationInDays">
    </label>    
    <!-- Rental fees per day -->
    <label class="item item-input">
      <span class="input-label">Rental fees</span>
      <input type="number" ng-model="model.realstate.rentalFees" ng-change="clalculateTotal()">
    </label>
    </div><!-- Duration List -->



    <!-- TOTAL -->
    <div class="list card">
      <div class="row item">
        <div class="col">Total</div>
        <div class="col item-number">{{model.total}}</div>
      </div>
      <div class="row item">
        <div class="col">Discount</div>
        <input ng-model="model.discount" ng-change="clalculateTotal()" type="number" class="col"/>
      </div>
      <div class="row item" ng-show="model.broker">
        <div class="col">Broker fees</div>
        <div class="col item-number">{{model.brokerFees}}</div>
      </div>
      <div class="row item item-divider">
        <div class="col">Grand total</div>
        <div style="font-size: 20px; font-weight: bold;" class="col item-number ">{{model.grandTotal}}</div>
      </div>
    </div>

    <div class="button-bar">
      <a ng-click="save()" class="button icon-right ion-checkmark-round button-positive" >Save</a>
      <a ng-click="getReport()" class="button icon-right ion-document-text button-calm">View Contract</a>
    </div>      
  </div>
  </wz-step>












<!-- 
====================================================================================================================
 -->
























  <wz-step title="Rener info">
    <div class="list">
      <div class="button-bar">
          <button ng-click="openModalPeople()" class=" button button-small buttom-full button-calm">Select Renter</button>
          <button class="button button-small button-balanced">New Renter</button>
      </div>
      <br/>
      <label class="item item-input">
        <span class="input-label">Name</span>
        <input type="text" ng-model="model.renter.name" ng-readonly="readOnly">
      </label>
      <label class="item item-input">
        <span class="input-label">Phone</span>
        <input type="text" ng-model="model.renter.phone1" ng-readonly="readOnly">
      </label>
      <label class="item item-input">
        <span class="input-label">Phone</span>
        <input type="text" ng-model="model.renter.phone2" ng-readonly="readOnly">
      </label>
      <label class="item item-input">
        <span class="input-label">Address</span>
        <input type="text" ng-model="model.renter.address" ng-readonly="readOnly">
      </label>
      <!-- ID Inputs -->
      <div class="item item-divider">
        Identity Info
      </div>
      <label class="item item-input item-select">
          <div class="input-label">
            ID type
          </div>
          <select ng-model="model.renter.idType" ng-disabled="readOnly">
              <option>Passport</option>
              <option>Driving License</option>
              <option>National Number</option>
          </select>
        </label>
      <label class="item item-input">
        <span class="input-label">ID Number</span>
        <input type="text" ng-model="model.renter.idNumber" ng-readonly="readOnly">
      </label>
      <label class="item item-input">
        <span class="input-label">Place of issue</span>
        <input type="text" ng-model="model.renter.idPlaceOfIssue" ng-readonly="readOnly">
      </label>
      <label class="item item-input">
        <span class="input-label">Date of issue</span>
        <input type="date" ng-model="model.renter.formatedIdDateOfIssue" ng-readonly="readOnly">
      </label>

      <button class="button button-small button-full button-positive">Attach photo</button>
      <button class="button button-small button-full button-positive" ng-click="next()">Add Companions</button>
      </div> 
  </wz-step>

  <wz-step title="Companions">
    <h4>Companions</h4>
    <div class="list">
      <div class="item item-divider"> Companion #1 Info </div>
      <label class="item item-input">
        <span class="input-label">Name</span>
        <input type="text" ng-model="model.companion1name">
      </label>
      <label class="item item-input">
        <span class="input-label">Phone</span>
        <input type="text" ng-model="model.companion1phone">
      </label>
      <div class="item item-divider"> Companion #2 Info </div>
      <label class="item item-input">
        <span class="input-label">Name</span>
        <input type="text" ng-model="model.companion2name">
      </label>
      <label class="item item-input">
        <span class="input-label">Phone</span>
        <input type="text" ng-model="model.companion2phone">
      </label>
      <div class="item item-divider"> Companion #3 Info </div>
      <label class="item item-input">
        <span class="input-label">Name</span>
        <input type="text" ng-model="model.companion3name">
      </label>
      <label class="item item-input">
        <span class="input-label">Phone</span>
        <input type="text" ng-model="model.companion3phone">
      </label>
    </div> 
      <button class="button button-small button-full button-positive" ng-click="next()">Set Duration</button>

  </wz-step>

  <wz-step title="Duration">
    <div class="list">
    <!-- Date of contract -->
    <label class="item item-input">
      <span class="input-label">Contract Date</span>
      <input type="date" ng-model="model.contractDate">
    </label>
    <div class="item item-divider">Select Duration - Rentring Period</div>
    <!-- Duration of lease on dayse -->
    <label class="item item-input">
      <span class="input-label">No. of days</span>
      <input type="number" ng-model="model.durationInDays">
    </label>
    <!-- Start Date -->
    <label class="item item-input">
      <span class="input-label">Start date</span>
      <input type="date" ng-model="model.startDate">
    </label>
    <!-- End Date -->
    <label class="item item-input">
      <span class="input-label">End date</span>
      <input type="date" ng-model="model.endDate">
    </label>
    </div><!-- Duration List -->
  </wz-step>

    <wz-step title="broker">
      <div class="list">
        <div class="button-bar">
            <button ng-click="openModalPeople('broker')" class=" button button-small buttom-full button-calm">Select Broker</button>
            <button class="button button-small button-balanced">New Broker</button>
        </div>
        <br/>

        <!-- Broker Info -->
        <div class="item item-divider">
          <b>Broker Info</b>
        </div>
        <!-- Broker Name -->
        <label class="item item-input">
          <span class="input-label">Name</span>
          <input type="text" ng-model="model.broker.name" ng-readonly="readOnlyBroker">
        </label>
        <!-- Broker Phone -->
        <label class="item item-input">
          <span class="input-label">Phone</span>
          <input type="text" ng-model="model.broker.phone1" ng-readonly="readOnlyBroker">
        </label>
        <!-- Broker Addres -->
        <label class="item item-input">
          <span class="input-label">Address</span>
          <input type="text" ng-model="model.broker.address" ng-readonly="readOnlyBroker">
        </label>
        <!-- Broker per -->
        <div class="item item-divider item-divider-input"></div>
        <label class="item item-input ">
          <span class="input-label">Broker Commision</span>
          <input  type="number" ng-model="model.brokerCommission" ng-change="clalculateTotal()" ng-readonly="readOnlyBroker">
          <span class="col-20">%</span>          
        </label>

      </div>
    </wz-step>

      <wz-step title="Finish"/>
      <div class="list">
        <!-- Duration of lease on dayse -->
        <!-- Rental Fees -->
        <!-- Total -->
        <!-- Broker Per -->
        <div class="list card">
          <div class="row item">
            <div class="col">Number of days</div>
            <input ng-model="model.durationInDays" type="number" class="col"></input>
          </div>
          <div class="row item">
            <div class="col">Rental fees</div>
            <input ng-model="model.realstate.rentalFees" type="number" class="col"></input>
          </div>
          <div class="row item">
            <div class="col">Total</div>
            <div class="col item-number"><b>{{model.total}}</b></div>
          </div>
          <div class="row item">
            <div class="col">Discount</div>
            <input ng-model="model.discount" type="number" class="col"></input>
          </div>
          <div class="row item">
            <div class="col">Broker fees</div>
            <div class="col item-number">{{model.brokerFees}}</div>
          </div>
          <div class="row item item-divider">
            <div class="col">Grand total</div>
            <div style="font-size: 20px; font-weight: bold;" class="col item-number ">{{model.grandTotal}}</div>
          </div>
        </div>        
      
      </div>
        <a ng-click="getReport()" class="button icon-right ion-document-text button-calm">View Contract</a>
      </wz-step>




  <!-- <pre>{{model|json}}</pre> -->
  <br/>
  <br/>


  </ion-content>
  <!-- Navigation -->
  <!-- <div class="bar bar-footer">
    <div class="button-bar">
      <a ng-click="save()" class="button icon-right ion-checkmark-round button-positive" >Save</a>
      <a class="button icon-left button-small ion-chevron-left button-dark" ng-click="previous()">Back</a>
      <a class="button icon-right button-small ion-chevron-right button-calm" ng-click="next()" >Next</a>
    </div>
  </div> -->
</ion-view>
